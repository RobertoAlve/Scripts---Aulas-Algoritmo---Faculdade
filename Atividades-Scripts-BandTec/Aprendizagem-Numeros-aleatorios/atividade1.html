<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <style>
        
        img {
            height: 250px;
            cursor: pointer;
        }

    </style>

</head>

<body>
    <button id="botao" onclick="jogo()">Iniciar Jogo</button>
    <br>
    <img onclick="scorpion()" id="img1" src="">
    <div id="barra1"></div>
    <br>
    <img onclick="subZero()" id="img2" src="">
    <div id="barra2"></div>
    <br>
    <div id="texto"></div>
</body>

</html>

<script>

    var vidaScorpion = 100;
    var vidaSub = 100;

    var golpesJogador1 = 0;
    var golpesJogador2 = 0;

    var margin = 0;


    function jogo() {

        botao.style.display = "none";

        img1.src = "../img/scorpion.png";
        img2.src = "../img/sub-zero.png";

        barra1.style.width = `${vidaScorpion}%`;
        barra1.style.height = "30px";
        barra1.style.backgroundColor = "green";

        barra2.style.widht = `${vidaSub}%`;
        barra2.style.height = "30px";
        barra2.style.backgroundColor = "green";

        texto.innerHTML = ` Golpes sofridos pelo lutador 1: 0
                            <br>Golpes sofridos pelo lutador 2: 0`;

    }

    function scorpion() {

        ++golpesJogador1;
        var sorteio = parseInt(Math.random() * 10 + 1);
        var vidaAmaisScorpion = ((vidaScorpion * 100) / vidaSub) - 100;
        var numeroCritico = vidaAmaisScorpion / 10;
        var danoAmais = (20 * vidaAmaisScorpion) / 100;
        var danoCritic = 20 + danoAmais;

        console.log(sorteio);
        console.log(vidaAmaisScorpion);
        console.log(numeroCritico);
        console.log(danoAmais);

        texto.innerHTML = ` Golpes sofridos pelo lutador 1: ${golpesJogador1}
                            <br>Golpes sofridos pelo lutador 2: ${golpesJogador2}`;

        barra1.style.width = `${vidaScorpion}%`;

        if (sorteio <= numeroCritico || vidaAmaisScorpion == 100) {
            vidaScorpion = (vidaScorpion - 20) - danoAmais;
        } else {
            vidaScorpion = vidaScorpion - 20;
        }

        if (danoCritic > vidaScorpion || danoCritic == vidaScorpion){
            barra1.style.width = `${0}%`;
        }

        if (vidaScorpion <= 30){
            barra1.style.backgroundColor = "red";

        }else if (vidaScorpion <= 60){
            barra1.style.backgroundColor = "yellow";
        }

        barra1.style.width = `${vidaScorpion}%`;

    }

    function subZero() {

        ++golpesJogador2;
        // margin += 20;
        var sorteio = parseInt(Math.random() * 10 + 1);
        var vidaAmaisSub = ((vidaSub * 100) / vidaScorpion) - 100;
        var numeroCritico = vidaAmaisSub / 10;
        var danoAmais = (20 * vidaAmaisSub) / 100;
        var danoCritic = 20 + danoAmais;

        console.log(sorteio);
        console.log(vidaAmaisSub);
        console.log(numeroCritico);
        console.log(danoAmais);

        texto.innerHTML = ` Golpes sofridos pelo lutador 1: ${golpesJogador1}
                            <br>Golpes sofridos pelo lutador 2: ${golpesJogador2}`;


        if (sorteio <= numeroCritico || vidaAmaisSub == 100){
            vidaSub = (vidaSub - 20) - danoAmais;
        } else{
            vidaSub = vidaSub - 20;
        };

        if (danoCritic > vidaSub || danoCritic == vidaSub){
            barra2.style.width = `${0}%`;
        }

        if (vidaSub <= 30){
            barra2.style.backgroundColor = "red";

        }else if (vidaSub <= 60){
            barra2.style.backgroundColor = "yellow";
        }

        barra2.style.width = `${vidaSub}%`;
        // barra2.style.marginLeft = `${margin}%`;

}

</script>